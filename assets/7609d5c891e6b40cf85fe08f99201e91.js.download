var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var b,d=[];!(b=a.next()).done;)d.push(b.value);return d};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.getGlobal=function(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a];for(var b=0;b<a.length;++b){var d=a[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)};$jscomp.polyfill=function(a,b,d,e){if(b){d=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var c=a[e];c in d||(d[c]={});d=d[c]}a=a[a.length-1];e=d[a];b=b(e);b!=e&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function d(a){return a instanceof c?a:new c(function(c,b){c(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var c=this;this.asyncExecuteFunction(function(){c.executeBatch_()})}this.batch_.push(a)};var e=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){e(a,0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var c=0;c<a.length;++c){var b=a[c];a[c]=null;try{b()}catch(m){this.asyncThrow_(m)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a})};var c=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var c=this.createResolveAndReject_();try{a(c.resolve,c.reject)}catch(h){c.reject(h)}};c.prototype.createResolveAndReject_=function(){function a(a){return function(g){b||(b=!0,a.call(c,g))}}var c=this,b=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};c.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof c)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};c.prototype.resolveToNonPromiseObj_=function(a){var c=void 0;try{c=a.then}catch(h){this.reject_(h);return}"function"==typeof c?this.settleSameAsThenable_(c,a):this.fulfill_(a)};c.prototype.reject_=function(a){this.settle_(2,a)};c.prototype.fulfill_=function(a){this.settle_(1,a)};c.prototype.settle_=function(a,c){if(0!=this.state_)throw Error("Cannot settle("+a+", "+c+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=c;this.executeOnSettledCallbacks_()};c.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)f.asyncExecute(this.onSettledCallbacks_[a]);this.onSettledCallbacks_=null}};var f=new b;c.prototype.settleSameAsPromise_=function(a){var c=this.createResolveAndReject_();a.callWhenSettled_(c.resolve,c.reject)};c.prototype.settleSameAsThenable_=function(a,c){var b=this.createResolveAndReject_();try{a.call(c,b.resolve,b.reject)}catch(m){b.reject(m)}};c.prototype.then=function(a,b){function g(a,c){return"function"==typeof a?function(c){try{d(a(c))}catch(r){f(r)}}:c}var d,f,e=new c(function(a,c){d=a;f=c});this.callWhenSettled_(g(a,d),g(b,f));return e};c.prototype.catch=function(a){return this.then(void 0,a)};c.prototype.callWhenSettled_=function(a,c){function b(){switch(d.state_){case 1:a(d.result_);break;case 2:c(d.result_);break;default:throw Error("Unexpected state: "+d.state_)}}var d=this;null==this.onSettledCallbacks_?f.asyncExecute(b):this.onSettledCallbacks_.push(b)};c.resolve=d;c.reject=function(a){return new c(function(c,b){b(a)})};c.race=function(a){return new c(function(c,b){for(var f=$jscomp.makeIterator(a),g=f.next();!g.done;g=f.next())d(g.value).callWhenSettled_(c,b)})};c.all=function(a){var b=$jscomp.makeIterator(a),f=b.next();return f.done?d([]):new c(function(a,c){function g(c){return function(b){e[c]=b;n--;0==n&&a(e)}}var e=[],n=0;do e.push(void 0),n++,d(f.value).callWhenSettled_(g(e.length-1),c),f=b.next();while(!f.done)})};return c},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(d){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(d||"")+"_"+b++,d)}var b=0;return a}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(d){}return!1};$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object")};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){a=$jscomp.makeIterator(a);var d=a.next();$jscomp.generator.ensureIteratorResultIsObject_(d);if(d.done)this.yieldResult=d.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(d.value,b)};$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,d){d?this.finallyContexts_[d]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(a){return{value:a,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,d){try{var e=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(e);if(!e.done)return this.context_.stop_(),e;var c=e.value}catch(f){return this.context_.yieldAllIterator_=null,this.context_.throw_(f),this.nextStep_()}this.context_.yieldAllIterator_=null;d.call(this.context_,c);return this.nextStep_()};$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(b,a.prototype);return b};$jscomp.asyncExecutePromiseGenerator=function(a){function b(b){return a.next(b)}function d(b){return a.throw(b)}return new Promise(function(e,c){function f(a){a.done?e(a.value):Promise.resolve(a.value).then(b,d).then(f,c)}f(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};var tdsLeads={};(function(){tdsLeads={items:[],init:function(){tdsLeads.items=[]},item:function(){this.jqueryObj=this.blockUid=void 0;this.submitHasErrors=this.isSubmit=this.inComposer=!1;this.messages={ack_require:"",captcha_user_score:"",captcha_failed:""};this._is_initialized=!1},_initialize_item:function(a){if(!0!==a._is_initialized){var b=jQuery("#g-recaptcha-response-leads");if(1===b.length){var d=b.attr("data-sitekey");grecaptcha.ready(function(){grecaptcha.execute(d,{action:"validate_captcha"}).then(function(a){document.getElementById("g-recaptcha-response-leads").value=a})})}a.jqueryObj.find(".tds-submit-btn").on("click",function(d){var c=jQuery(this).data("url"),f=a.jqueryObj.find(".tds-checkbox"),g=a.jqueryObj.find(".tds-messages-error");a.jqueryObj.find(".tds-form");var e=!1,h=!1;f.length&&(f=a.jqueryObj.find("#pp_checkbox_"+a.blockUid),f.length&&!f.is(":checked")&&(d.preventDefault(),e=!0,g.length?g.find(".tds-message-checkbox").length||g.append('<div class="tds-message tds-message-checkbox">'+a.messages.ack_require+"</div>"):a.jqueryObj.find(".tds-info").prepend('<div class="tds-messages tds-messages-error"><div class="tds-message tds-message-checkbox">'+a.messages.ack_require+"</div></div>"),setTimeout(function(){var c=jQuery("."+a.blockUid+" .tds-messages");c.length&&(c.addClass("tds-messages-hiding"),setTimeout(function(){c.remove()},300))},3E3)));e||1!==b.length||(g={action:"td_ajax_submit_captcha",token:document.getElementById("g-recaptcha-response-leads").value},jQuery.ajax({type:"POST",url:td_ajax_url,data:g,async:!1}).success(function(c){c=jQuery.parseJSON(c);!1===c.success&&(d.preventDefault(),h=!0,"score failed"===c.error?a.jqueryObj.find(".tds-info").prepend('<div class="tds-messages tds-messages-error"><div class="tds-message tds-message-checkbox">'+a.messages.captcha_user_score+"</div></div>"):a.jqueryObj.find(".tds-info").prepend('<div class="tds-messages tds-messages-error"><div class="tds-message tds-message-checkbox">'+a.messages.captcha_failed+"</div></div>"))}),setTimeout(function(){var c=jQuery("."+a.blockUid+" .tds-messages");c.length&&(c.addClass("tds-messages-hiding"),setTimeout(function(){c.remove()},300))},3E3));e||h||"undefined"===typeof c||(d.preventDefault(),window.location.replace(c))});a.jqueryObj.find("#pp_checkbox_"+a.blockUid).change(function(){var b=jQuery(this),c=a.jqueryObj.find(".tds-messages-error"),d=c.find(".tds-message-checkbox");b.is(":checked")&&(d.remove(),c.is(":empty")&&c.remove())});a._is_initialized=!0}},addItem:function(a){if("undefined"===typeof a.blockUid)throw"item.blockUid is not defined";tdsLeads.items.push(a);tdsLeads._initialize_item(a)},deleteItem:function(a){for(var b=0;b<tdsLeads.items.length;b++)if(tdsLeads.items[b].blockUid===a)return tdsLeads.items.splice(b,1),!0;return!1}}})();jQuery().ready(function(){tdsLeads.init()});var tdsStore;(function(a,b,d){tdsStore={_db:d,_dbName:d,_dbStoreName:d,_indexedDB:d,_isInitialized:!1,init:function(a,c){tdsStore._isInitialized||(tdsStore._indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,tdsStore._indexedDB?(tdsStore._dbName=a,tdsStore._dbStoreName=c):console.log("Your browser doesn't support a stable version of IndexedDB!"),tdsStore._isInitialized=!0)},openDb:function(){if(tdsStore._isInitialized){var a=tdsStore._indexedDB.open(tdsStore._dbName);a.onsuccess=function(a){tdsStore._db=this.result};a.onupgradeneeded=function(a){a.currentTarget.result.createObjectStore(tdsStore._dbStoreName,{keyPath:"id"})}}},getObjectStore:function(a,c){if(tdsStore._isInitialized)return tdsStore._db.transaction(a,c).objectStore(a)},add:function(a,c){if(tdsStore._isInitialized){a={id:a,content:c};c=tdsStore.getObjectStore(tdsStore._dbStoreName,"readwrite");try{var b=c.put(a)}catch(g){throw console.log(g.name),g}b.onsuccess=function(a){};b.onerror=function(){}}},get:function(b){var c=a.Deferred(),d=tdsStore.getObjectStore(tdsStore._dbStoreName,"readwrite");try{var g=d.get(b)}catch(n){throw console.log(n.name),n}g.onsuccess=function(a){c.resolve(this)};g.onerror=function(){};return c}};tdsStore.init("Leads","Cache");tdsStore.openDb()})(jQuery,_);var tdsMain={};(function(){tdsMain={stripe:void 0,stripeElements:void 0,init:function(){jQuery("body").on("click",".tds-choose-plan-type",function(a){a.preventDefault();a=jQuery(this);var c=a.data("type");"undefined"!==typeof c&&(a=a.data("url-"+c),"undefined"!==typeof a&&(window.location=a))}).on("click",".tds-switcher",function(){tdsMain.setActivePlan(jQuery(this).val())}).on("click",".tds-choose-plan-type-free",function(a){a.preventDefault();a=jQuery(this);var c=a.data("type");"undefined"!==typeof c&&(a=a.data("url-"+c),"undefined"!==typeof a&&(window.location=a))}).on("click",".tds-s-table-col-expand",function(a){a=jQuery(this);var c=a.find(".tds-s-table-col-label"),b=a.closest(".tds-s-table-row"),d=b.nextAll(".tds-s-table-row-extra-wrap-info:first");b.length&&d.length&&(c.text("Show more info"===c.text()?"Show less info":"Show more info"),a.attr("title","Show more info"===a.attr("title")?"Show less info":"Show more info"),b.toggleClass("tds-s-table-row-info-expanded"),b.hasClass("tds-s-table-row-stripe-expanded")||b.toggleClass("tds-s-table-row-active"),d.toggle())}).on("click",".tds-resend-activation-link",function(a){var c=jQuery(this),b=c.siblings(".tds-s-notif-descr"),d=c.siblings(".tds-s-notif-js").text();a=c.data("user");"undefined"!==typeof a&&(c.addClass("tds-s-btn-saving"),jQuery.ajax({type:"POST",url:td_ajax_url,data:{action:"td_resend_subscription_activation_link",user:a},success:function(a,g,f){a=jQuery.parseJSON(a);switch(a[0]){case "resend_activation_link":c.next(".tds-info").show().html(a[2]),1===a[1]?(c.addClass("tds-s-btn-saved"),b.text(d)):c.removeClass("tds-s-btn-saving")}},error:function(a,c,b){}}))});var a=jQuery(".tds-paypal-button");if(a.length){var b=a.closest(".tds-s-table-row").data("subscription-id");paypal.Buttons({fundingSource:paypal.FUNDING.PAYPAL,createOrder:function(c,b){return b.order.create({purchase_units:[{amount:{value:a.data("value"),currency:a.data("currency")}}],application_context:{shipping_preference:"NO_SHIPPING"}})},onApprove:function(c,d){return d.order.capture().then(function(c){a.hide();jQuery.ajax({timeout:1E4,type:"POST",url:tdsMain.get_rest_endpoint("tds_subscription/update_paypal_subscription","uuid="+tdsMain.get_unique_id()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tds_js_globals.wpRestNonce)},cache:!1,dataType:"json",data:{subscriptionId:b,paypalOrderId:c.id,paypalOrderIntent:c.intent,paypalOrderStatus:c.status,paypalOrderPayerId:c.payer.payer_id,paypalOrderPayerGivenName:c.payer.name.given_name,paypalOrderPayerSurname:c.payer.name.surname,paypalOrderPayerEmail:c.payer.email_address,paypalOrderPayeeId:c.purchase_units[0].payee.merchant_id,paypalOrderPayeeEmail:c.purchase_units[0].payee.email_address,paypalOrderAmountCurrencyCode:c.purchase_units[0].amount.currency_code,paypalOrderAmountValue:c.purchase_units[0].amount.value,paypalOrderInfo:JSON.stringify(c,null,2),paypalOrderCreateTime:c.create_time,paypalOrderUpdateTime:c.update_time,paypalOrderCaptureCreateTime:c.purchase_units[0].payments.captures[0].create_time,paypalOrderCaptureUpdateTime:c.purchase_units[0].payments.captures[0].update_time},success:function(a,c,b){console.log(a);"undefined"!==typeof a.error?console.log(a.error):"undefined"!==typeof a.success&&window.location.reload()},error:function(a,c,b){console.log("tds save settings - Error callback - textStatus: "+c+" errorThrown: "+b)}})})}}).render(".tds-paypal-button")}jQuery(".tds-stripe-button").length&&(tdsMain.checkStripePayment(),jQuery("body").on("click",".tds-stripe-button",function(){var a=this,b,d,e,h,m,l,k,p,t,q,r,w,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){switch(c.nextAddress){case 1:b=jQuery(a);d=b.data("payment-page-url");e=jQuery("#tds-stripe-container");if(d)return window.location=d,c.return();if(!e.length){c.jumpTo(0);break}h=b.closest(".tds-s-table-row");m=b.closest(".tds-s-table-body");l=h.next(".tds-s-table-row-extra-wrap-stripe");l.length||(l=m.find(".tds-s-table-row-extra-wrap-stripe"),k=l.prev(".tds-s-table-row"),k.removeClass("tds-s-table-row-stripe-expanded"),k.hasClass("tds-s-table-row-info-expanded")||k.removeClass("tds-s-table-row-active"),l.insertAfter(h),e.appendTo(l.find(".tds-stripe-placeholder")),e.find("#tds-payment-element").html("").removeClass("StripeElement").addClass("loading"),e.find("#tds-stripe-submit").attr("disabled",!0),e.find(".tds-stripe-cancel").attr("disabled",!0));h.length&&l.length&&(h.addClass("tds-s-table-row-stripe-expanded"),h.hasClass("tds-s-table-row-info-expanded")||h.addClass("tds-s-table-row-active"),l.show());p=e.find("#tds-stripe-submit");t=b.data("subscription-id");q=b.data("public-key");r=b.data("stripe-pi");w=e.find(".tds-stripe-cancel");tdsMain.stripe=Stripe(q);tdsMain.checkStripeSubsId=t;if("undefined"===typeof r){c.jumpTo(3);break}v=r;if(!r.startsWith("seti_")){c.jumpTo(4);break}return c.yield(tdsMain.stripeCheckSetupIntent(r,t),5);case 5:v=c.yieldResult;case 4:tdsMain.stripeElements=tdsMain.stripe.elements({clientSecret:v}),x=tdsMain.stripeElements.create("payment"),x.mount("#tds-payment-element"),setTimeout(function(){p.removeAttr("disabled");w.removeAttr("disabled");jQuery("#tds-payment-element").removeClass("loading")},200);case 3:p.on("click",tdsMain.stripeSubmitHandler),c.jumpToEnd()}})}));jQuery(".tds-stripe-cancel").on("click",function(a){a.preventDefault();a=jQuery(this).closest(".tds-s-table-row-extra-wrap-stripe");var c=a.prev();console.log(a);c.length&&a.length&&(c.removeClass("tds-s-table-row-stripe-expanded"),c.hasClass("tds-s-table-row-info-expanded")||c.removeClass("tds-s-table-row-active"),a.hide(),a=a.find("#tds-stripe-container"),a.length&&(a.find("#tds-payment-element").html("").removeClass("StripeElement").addClass("loading"),a.find("#tds-stripe-submit").attr("disabled",!0),a.find(".tds-stripe-cancel").attr("disabled",!0)))});var d=jQuery(".tds-switcher:checked"),e="year";d.length&&(e=d.val());tdsMain.setActivePlan(e);"undefined"!==typeof tdLogin&&(jQuery("#tds_reset_new_password, #tds_reset_new_password_confirm").keydown(function(a){13===a.keyCode&&jQuery("#tds_reset_button").click()}),jQuery("#tds_reset_button").on("click",function(){var a=jQuery("#tds_reset_key").val().trim(),b=jQuery("#tds_reset_user_login").val().trim(),d=jQuery("#tds_reset_redirect").val().trim(),e=jQuery("#tds_reset_new_password").val().trim(),h=jQuery("#tds_reset_new_password_confirm").val().trim();tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-error"]);tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-success"]);tdLogin.showHideMsg(window.td_please_wait);""===e?(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_reset_pass_empty)):tdLogin.pass_pattern.test(e)?""!==e&&""===h?(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_reset_pass_confirm_empty)):e!==h?(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_reset_pass_not_matching)):tdLogin.doCustomAction("td_mod_subscription_reset_pass",a,b,e,h,d):(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_pass_pattern_incorrect))}),jQuery("#tds_forgot_email").keydown(function(a){13===a.keyCode&&jQuery("#tds_forgot_button").click()}),jQuery("#tds_forgot_button").on("click",function(){var a=jQuery("#tds_forgot_email");a.length&&(a=a.val().trim(),tdLogin.email_pattern.test(a)?(tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_please_wait),tdLogin.doCustomAction("td_mod_remember_pass",a,"","")):(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_email_incorrect)))}),jQuery("#tds_register_email, #tds_register_user, #tds_register_pass, #tds_register_retype_pass").keydown(function(a){13===a.keyCode&&jQuery("#tds_register_button").click()}),jQuery("#tds_register_button").on("click",function(a){a.preventDefault();a=jQuery("#tds_register_email");var c=jQuery("#tds_register_user"),b=jQuery("#tds_register_pass"),d=jQuery("#tds_register_retype_pass"),e=jQuery("#gRecaptchaResponseR");if(a.length&&c.length&&b.length&&d.length){var m=a.val().trim(),l=c.val().trim(),k=b.val().trim(),p=d.val().trim(),t=e.attr("data-sitekey"),q="";tdLogin.email_pattern.test(m)?l?k?tdLogin.pass_pattern.test(k)?k!==p?(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_retype_pass_incorrect)):e.length?grecaptcha.ready(function(){grecaptcha.execute(t,{action:"submit"}).then(function(a){q=a;tdLogin.doCustomAction("td_mod_subscription_register",m,l,k,p,q)})}):tdLogin.doCustomAction("td_mod_subscription_register",m,l,k,p):(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_pass_pattern_incorrect)):(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_pass_empty)):(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_user_incorrect)):(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_email_incorrect))}}),jQuery("#tds_login_pass, #tds_login_email").keydown(function(a){13===a.keyCode&&jQuery("#tds_login_button").click()}),jQuery("#tds_login_button").on("click",function(a){a.preventDefault();a=jQuery("#tds_login_email");var b=jQuery("#tds_login_pass"),c=jQuery("#gRecaptchaResponseL");if(a.length&&b.length){var d=a.val().trim(),e=b.val().trim(),m=c.attr("data-sitekey"),l="";d?e?c.length?grecaptcha.ready(function(){grecaptcha.execute(m,{action:"submit"}).then(function(a){l=a;tdLogin.doCustomAction("td_mod_login",d,"",e,"",l);tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-error"]);tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"])})}):(tdLogin.doCustomAction("td_mod_login",d,"",e),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"])):(tdLogin.showHideMsg(window.td_pass_empty),tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"])):(tdLogin.showHideMsg(window.td_email_user_empty),tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]))}}),jQuery("#tds-login-div .td-login-fb-subscr").on("click",function(a){a.preventDefault();tdLogin.doFBLoginActionOptIn("login",jQuery(this))}),jQuery("#tds-register-div .td-login-fb-subscr").on("click",function(a){a.preventDefault();tdLogin.doFBLoginActionOptIn("register",jQuery(this))}))},stripeCheckSetupIntent:function(a,b){var d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){d="";jQuery.ajax({timeout:1E4,type:"POST",url:tdsMain.get_rest_endpoint("tds_subscription/check_stripe_si","uuid="+tdsMain.get_unique_id()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tds_js_globals.wpRestNonce);a.subscriptionId=b},async:!1,cache:!1,dataType:"json",data:{subscriptionId:b,stripeSetupIntent:a},success:function(a,b,e){tdsMain.checkStripeSubsId!==e.subscriptionId?console.log("invalid subscriptionId"):"undefined"!==typeof a.error?tdsMain.showStripeMsg(a.error,"error",!0):"undefined"!==typeof a.stripe_setup_intent&&(d=a.stripe_setup_intent.client_secret)},error:function(a,b,d){tdsMain.checkStripeSubsId!==a.subscriptionId?console.log("invalid subscriptionId"):console.log("tds subscription stripe - Error callback - textStatus: "+b+" errorThrown: "+d)}});return e.return(d)})},get_rest_endpoint:function(a,b){return _.isEmpty(window.tds_js_globals.permalinkStructure)?window.tds_js_globals.wpRestUrl+a+"&"+b:window.tds_js_globals.wpRestUrl+a+"?"+b},get_unique_id:function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},setActivePlan:function(a){var b=jQuery(".tds-choose-plan-type").not(".tds-switcher-change"),d=jQuery(".tds_plans_price, .tds_plans_description");b.each(function(b,c){b=jQuery(c);b.data("type",a);"undefined"===typeof b.data("url-"+a)?b.attr("disabled",!0):b.removeAttr("disabled")});d.each(function(b,c){b=jQuery(c);c=b.data("type-from-block");var d=b.find('[class*="tds-show-plan-"]'),e=b.find(".tds-plan-placeholder"),n=a,h=!1;"undefined"!==typeof c&&""!==c&&"free"!==c&&(n=c);d.length?(d.each(function(a,b){a=jQuery(b);b=a.data("type");"undefined"!==typeof b&&b===n?(a.hasClass("tds-show-plan-visible")||a.addClass("tds-show-plan-visible"),window.location!==window.parent.location&&e.hasClass("tds-plan-placeholder-visible")&&e.removeClass("tds-plan-placeholder-visible"),h=!0):a.removeClass("tds-show-plan-visible")}),!1===h&&window.location!==window.parent.location&&(e.hasClass("tds-plan-placeholder-visible")||e.addClass("tds-plan-placeholder-visible"))):"free"!==c&&(window.location!==window.parent.location?e.hasClass("tds-plan-placeholder-visible")||e.addClass("tds-plan-placeholder-visible"):b.remove())})},showStripeMsg:function(a,b,d){b=void 0===b?"":b;var e=jQuery("#tds-payment-message"),c=e.find(".tds-s-notif-descr");e.show();c.html(a);""!==b&&e.addClass("tds-s-notif-"+b);"undefined"!==typeof d&&!0===d||setTimeout(function(){e.hide();c.html("");""!==b&&e.removeClass("tds-s-notif-"+b)},1E4)},b64EncodeUnicode:function(a){return btoa(encodeURIComponent(a).replace(/%([0-9A-F]{2})/g,function(a,d){return String.fromCharCode("0x"+d)}))},b64DecodeUnicode:function(a){return decodeURIComponent(atob(a).split("").map(function(a){return"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)}).join(""))},setStorageItem:function(a,b){tdsStore.add(a,b)},getStorageItem:function(a){return tdsStore.get(a)},setLocalStorageItem:function(a,b){var d=tdsMain._getStorage();d=null===d?{}:JSON.parse(tdsMain.b64DecodeUnicode(d));d[a]=b;tdsMain._setStorage(tdsMain.b64EncodeUnicode(JSON.stringify(d)))},getLocalStorageItem:function(a){var b=tdsMain._getStorage();if(null!==b)try{if(b=JSON.parse(tdsMain.b64DecodeUnicode(b)),b.hasOwnProperty(a))return b[a]}catch(d){}},clearItem:function(){},_getStorage:function(){return window.localStorage.getItem(window.tdcAdminSettings.themeName)},_setStorage:function(a){window.localStorage.setItem(window.tdcAdminSettings.themeName,a)},stripeSubmitHandler:function(a){var b=this,d,e,c,f,g,n,h,m,l,k,p,t,q,r,w,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:a.preventDefault();d=jQuery(b);e=d.closest(".tds-s-table-row-extra-wrap-stripe");c=e.prev();f=c.data("subscription-id");g=d.data("public-key");n=d.data("type");h=e.find(".tds-stripe-cancel");d.addClass("tds-s-btn-saving");d.attr("disabled","disabled");h.attr("disabled","disabled");m={subscriptionId:f,publicKey:g};l=new URL(window.location.href);k=new URLSearchParams([].concat($jscomp.arrayFromIterable(Array.from(l.searchParams.entries())),$jscomp.arrayFromIterable(Object.entries(m))));p=(new URL(""+l.origin+l.pathname+"?"+k)).toString();t={elements:tdsMain.stripeElements,confirmParams:{return_url:p}};if("setup"===n)return u.yield(tdsMain.stripe.confirmSetup(t),6);if("payment"!==n){u.jumpTo(3);break}return u.yield(tdsMain.stripe.confirmPayment(t),5);case 5:r=u.yieldResult;q=w=r.error;u.jumpTo(3);break;case 6:v=u.yieldResult,q=x=v.error;case 3:-1!==["card_error","validation_error","invalid_request_error"].indexOf(q.type)?tdsMain.showStripeMsg(q.message,"error"):tdsMain.showStripeMsg("An unexpected error occurred!","error"),d.removeClass("tds-s-btn-saving"),d.removeAttr("disabled"),h.removeAttr("disabled"),u.jumpToEnd()}})},checkStripePayment:function(){var a,b,d,e,c,f,g,n,h,m,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:a=new URLSearchParams(window.location.search);b=a.get("payment_intent_client_secret");d=a.get("setup_intent_client_secret");e=a.get("publicKey");if(!b&&!d||!e)return k.return();"undefined"===typeof tdsMain.stripe&&(tdsMain.stripe=Stripe(e));c=a.get("subscriptionId");if(b)return k.yield(tdsMain.stripe.retrievePaymentIntent(b),6);if(!d){k.jumpTo(3);break}return k.yield(tdsMain.stripe.retrieveSetupIntent(d),5);case 5:n=k.yieldResult;f=h=n.setupIntent;g="setupIntent";k.jumpTo(3);break;case 6:m=k.yieldResult,f=l=m.paymentIntent,g="paymentIntent";case 3:switch(f.status){case "succeeded":tdsMain.showStripeMsg("Payment Stripe Succeeded!","success");break;case "processing":tdsMain.showStripeMsg("Your payment is processing.","info");break;case "requires_payment_method":tdsMain.showStripeMsg("Your payment was not successful, please try again.","error");break;default:tdsMain.showStripeMsg("Something went wrong.","error")}jQuery.ajax({timeout:1E4,type:"POST",url:tdsMain.get_rest_endpoint("tds_subscription/update_stripe_subscription","uuid="+tdsMain.get_unique_id()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tds_js_globals.wpRestNonce)},cache:!1,dataType:"json",data:{subscriptionId:c,stripeIntentType:g,stripePaymentIntent:f.id,stripePaymentStatus:f.status,stripePaymentInfo:JSON.stringify(f)},success:function(a,b,c){console.log(a);"undefined"!==typeof a.error?console.log(a.error):"undefined"!==typeof a.success&&"undefined"!==typeof a.redirect_url&&(window.location.href=decodeURI(a.redirect_url))},error:function(a,b,c){console.log("tds_subscription/update_stripe_subscription - Error callback - textStatus: "+b+" errorThrown: "+c)}});k.jumpToEnd()}})}}})();jQuery().ready(function(){tdsMain.init()})
;